{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-promises.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nform.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(event) {\n  event.preventDefault();\n\n  const { delay, step, amount } = event.currentTarget.elements;\n\n  const promisesAmount = Number(amount.value);\n  if (promisesAmount <= 0) {\n    displayError('Error', 'Amount should be a positive number');\n    return;\n  }\n\n  let firstDelay = Number(delay.value);\n  const promiseStep = Number(step.value);\n\n  for (let i = 0; i < promisesAmount; i += 1) {\n    const promiseDelay = firstDelay + promiseStep * i;\n\n    createPromise(i + 1, promiseDelay)\n      .then(({ position, delay }) => {\n        displaySuccess('✅', `Fulfilled promise ${position} in ${delay}ms`);\n      })\n      .catch(({ position, delay }) => {\n        displayError('❌', `Rejected promise ${position} in ${delay}ms`);\n      });\n  }\n}\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n\n  return new Promise((resolve, reject) => {\n    setTimeout(\n      payload => {\n        if (shouldResolve) {\n          resolve(payload);\n        } else {\n          reject(payload);\n        }\n      },\n      delay,\n      { position, delay }\n    );\n  });\n}\n\nfunction displaySuccess(title, message) {\n  iziToast.success({\n    title,\n    message,\n  });\n}\n\nfunction displayError(title, message) {\n  iziToast.error({\n    title,\n    message,\n  });\n}\n"],"names":["form","onFormSubmit","event","delay","step","amount","promisesAmount","displayError","firstDelay","promiseStep","i","promiseDelay","createPromise","position","displaySuccess","shouldResolve","resolve","reject","payload","title","message","iziToast"],"mappings":"wIAGA,MAAMA,EAAO,SAAS,cAAc,OAAO,EAC3CA,EAAK,iBAAiB,SAAUC,CAAY,EAE5C,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EAEpB,KAAM,CAAE,MAAAC,EAAO,KAAAC,EAAM,OAAAC,CAAQ,EAAGH,EAAM,cAAc,SAE9CI,EAAiB,OAAOD,EAAO,KAAK,EAC1C,GAAIC,GAAkB,EAAG,CACvBC,EAAa,QAAS,oCAAoC,EAC1D,MACD,CAED,IAAIC,EAAa,OAAOL,EAAM,KAAK,EACnC,MAAMM,EAAc,OAAOL,EAAK,KAAK,EAErC,QAASM,EAAI,EAAGA,EAAIJ,EAAgBI,GAAK,EAAG,CAC1C,MAAMC,EAAeH,EAAaC,EAAcC,EAEhDE,EAAcF,EAAI,EAAGC,CAAY,EAC9B,KAAK,CAAC,CAAE,SAAAE,EAAU,MAAAV,KAAY,CAC7BW,EAAe,IAAK,qBAAqBD,QAAeV,KAAS,CACzE,CAAO,EACA,MAAM,CAAC,CAAE,SAAAU,EAAU,MAAAV,KAAY,CAC9BI,EAAa,IAAK,oBAAoBM,QAAeV,KAAS,CACtE,CAAO,CACJ,CACH,CAEA,SAASS,EAAcC,EAAUV,EAAO,CACtC,MAAMY,EAAgB,KAAK,OAAM,EAAK,GAEtC,OAAO,IAAI,QAAQ,CAACC,EAASC,IAAW,CACtC,WACEC,GAAW,CACLH,EACFC,EAAQE,CAAO,EAEfD,EAAOC,CAAO,CAEjB,EACDf,EACA,CAAE,SAAAU,EAAU,MAAAV,CAAO,CACzB,CACA,CAAG,CACH,CAEA,SAASW,EAAeK,EAAOC,EAAS,CACtCC,EAAS,QAAQ,CACf,MAAAF,EACA,QAAAC,CACJ,CAAG,CACH,CAEA,SAASb,EAAaY,EAAOC,EAAS,CACpCC,EAAS,MAAM,CACb,MAAAF,EACA,QAAAC,CACJ,CAAG,CACH"}